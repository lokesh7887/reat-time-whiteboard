(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(149)}])},8374:function(e,t,s){"use strict";s.d(t,{r:function(){return n}});let n=[...Object.values({PURPLE:"#6B32F3",BLUE:"#408FF8",RED:"#F32D27",GREEN:"#6FCB12",GOLD:"#A89D6C",PINK:"#EB29DA",MINT:"#19CB87",RED_LIGHT:"#ED7878",CYAN:"#02CBF6",RED_DARK:"#BA1555",ORANGE:"#FF7300"})]},7160:function(e,t,s){"use strict";s.d(t,{W:function(){return n}});let n=(0,s(2599).io)()},7912:function(e,t,s){"use strict";s.d(t,{NW:function(){return n.NW},av:function(){return n.av},bo:function(){return n.bo},u4:function(){return n.u4}}),s(334);var n=s(8435)},334:function(e,t,s){"use strict";s.d(t,{X:function(){return o},p:function(){return r}});var n=s(2804);let r={id:"",users:new Map,usersMoves:new Map,movesWithoutUser:[],myMoves:[]},o=(0,n.cn)({key:"room",default:r})},8435:function(e,t,s){"use strict";s.d(t,{av:function(){return d},NW:function(){return u},bb:function(){return i},u4:function(){return a},bo:function(){return c}});var n=s(2804),r=s(8374);let o=e=>{let t=r.r.findIndex(t=>t===e);return -1===t?r.r[0]:r.r[(t+1)%r.r.length]};var l=s(334);let u=()=>(0,n.sJ)(l.X),i=()=>(0,n.Zl)(l.X),a=()=>{let e=(0,n.Zl)(l.X);return t=>{e({...l.p,id:t})}},c=()=>{let e=(0,n.Zl)(l.X);return{handleAddUser:(t,s)=>{e(e=>{var n;let r=e.users,l=e.usersMoves,u=o(null===(n=[...r.values()].pop())||void 0===n?void 0:n.color);return r.set(t,{name:s,color:u}),l.set(t,[]),{...e,users:r,usersMoves:l}})},handleRemoveUser:t=>{e(e=>{let s=e.users,n=e.usersMoves,r=n.get(t);return s.delete(t),n.delete(t),{...e,users:s,usersMoves:n,movesWithoutUser:[...e.movesWithoutUser,...r||[]]}})},handleAddMoveToUser:(t,s)=>{e(e=>{let n=e.usersMoves,r=e.usersMoves.get(t);return n.set(t,[...r||[],s]),{...e,usersMoves:n}})},handleRemoveMoveFromUser:t=>{e(e=>{let s=e.usersMoves,n=e.usersMoves.get(t);return null==n||n.pop(),s.set(t,n||[]),{...e,usersMoves:s}})}}},d=()=>{let[e,t]=(0,n.FV)(l.X);return{handleAddMyMove:e=>{t(t=>{var s;return(null===(s=t.myMoves[t.myMoves.length-1])||void 0===s?void 0:s.options.mode)==="select"?{...t,myMoves:[...t.myMoves.slice(0,t.myMoves.length-1),e]}:{...t,myMoves:[...t.myMoves,e]}})},handleRemoveMyMove:()=>{let s=[...e.myMoves],n=s.pop();return t(e=>({...e,myMoves:s})),n},myMoves:e.myMoves}}},8277:function(e,t,s){"use strict";var n=s(5893),r=s(6691),o=s(8147);t.Z=e=>{let{id:t}=e,{closeModal:s}=(0,o.d)();return(0,n.jsxs)("div",{className:"relative flex flex-col items-center rounded-md bg-white p-10 ",children:[(0,n.jsx)("button",{onClick:s,className:"absolute top-5 right-5",children:(0,n.jsx)(r.oHP,{})}),(0,n.jsxs)("h2",{className:"text-lg font-bold",children:['Room with id "',t,'" does not exist or is full!']}),(0,n.jsx)("h3",{children:"Try to join room later."})]})}},149:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var n=s(5893),r=s(7294),o=s(1163),l=s(7160),u=s(8147),i=s(7912),a=s(8277),c=()=>{let{openModal:e}=(0,u.d)(),t=(0,i.u4)(),[s,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),v=(0,o.useRouter)();return(0,r.useEffect)(()=>{document.body.style.backgroundColor="white"},[]),(0,r.useEffect)(()=>{l.W.on("created",e=>{t(e),v.push(e)});let r=(r,o)=>{o?e((0,n.jsx)(a.Z,{id:s})):(t(r),v.push(r))};return l.W.on("joined",r),()=>{l.W.off("created"),l.W.off("joined",r)}},[e,s,v,t]),(0,r.useEffect)(()=>{l.W.emit("leave_room"),t("")},[t]),(0,n.jsxs)("div",{className:"flex flex-col items-center py-24",children:[(0,n.jsx)("h1",{className:"text-5xl font-extrabold leading-tight sm:text-extra",children:"Digiboard"}),(0,n.jsx)("h3",{className:"text-xl sm:text-2xl",children:"Real-time whiteboard"}),(0,n.jsxs)("div",{className:"mt-10 flex flex-col gap-2",children:[(0,n.jsx)("label",{className:"self-start font-bold leading-tight",children:"Enter your name"}),(0,n.jsx)("input",{className:"input",id:"room-id",placeholder:"Username...",value:d,onChange:e=>m(e.target.value.slice(0,15))})]}),(0,n.jsx)("div",{className:"my-8 h-px w-96 bg-zinc-200"}),(0,n.jsxs)("form",{className:"flex flex-col items-center gap-3",onSubmit:e=>{e.preventDefault(),s&&l.W.emit("join_room",s,d)},children:[(0,n.jsx)("label",{htmlFor:"room-id",className:"self-start font-bold leading-tight",children:"Enter room id"}),(0,n.jsx)("input",{className:"input",id:"room-id",placeholder:"Room id...",value:s,onChange:e=>c(e.target.value)}),(0,n.jsx)("button",{className:"btn",type:"submit",children:"Join"})]}),(0,n.jsxs)("div",{className:"my-8 flex w-96 items-center gap-2",children:[(0,n.jsx)("div",{className:"h-px w-full bg-zinc-200"}),(0,n.jsx)("p",{className:"text-zinc-400",children:"or"}),(0,n.jsx)("div",{className:"h-px w-full bg-zinc-200"})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)("h5",{className:"self-start font-bold leading-tight",children:"Create new room"}),(0,n.jsx)("button",{className:"btn",onClick:()=>{l.W.emit("create_room",d)},children:"Create"})]})]})},d=()=>(0,n.jsx)(c,{})}},function(e){e.O(0,[617,483,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);